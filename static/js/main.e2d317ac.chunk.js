(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{30:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(23),s=n.n(i),c=(n(30),n(15)),o=n(6),u=n(7),l=n(9),d=n(8),j=n(13),b=n(4),h=n(2),p=n.n(h),f=n(5),v=n(16),O=n(3),m=n(0),x=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(m.jsx)("div",{className:"loading",children:Object(m.jsx)("p",{children:"Carregando... \ud83c\udfb6"})})}}]),n}(a.Component),g="user",k=function(e){return localStorage.setItem(g,JSON.stringify(e))},y=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},S=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(g));null===t&&(t={}),y(t)(e)}))},N=function(e){return new Promise((function(t){k(Object(c.a)(Object(c.a)({},{name:"",email:"",image:"",description:""}),e)),y("OK")(t)}))},C=n.p+"static/media/login.12a59944.png",w=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={inputName:"",loading:!1,redirect:!1},e.handleChange=e.handleChange.bind(Object(O.a)(e)),e.onLoading=e.onLoading.bind(Object(O.a)(e)),e.renderPage=e.renderPage.bind(Object(O.a)(e)),e}return Object(u.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.id,a=t.value;this.setState(Object(v.a)({},n,a))}},{key:"onLoading",value:function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,N(t);case 3:this.setState({loading:!1,redirect:!0});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderPage",value:function(){var e=this,t=this.state,n=t.inputName;return t.redirect?Object(m.jsx)(b.a,{to:"/search"}):Object(m.jsxs)("div",{"data-testid":"page-login",className:"loginContainer",children:[Object(m.jsx)("img",{src:C,alt:"trybe-logo"}),Object(m.jsxs)("form",{autoComplete:"off",className:"loginForm",children:[Object(m.jsx)("label",{htmlFor:"inputName"}),Object(m.jsx)("input",{type:"text",value:n,onChange:this.handleChange,"data-testid":"login-name-input",id:"inputName",placeholder:"Nome",onKeyPress:function(t){"Enter"===t.key&&e.onLoading({name:n})}}),n.length>=3?Object(m.jsx)("button",{"data-testid":"login-submit-button",onClick:function(){return e.onLoading({name:n})},type:"button",children:"Entrar"}):Object(m.jsx)("button",{type:"submit","data-testid":"login-submit-button",disabled:!0,children:"Entrar"})]})]})}},{key:"render",value:function(){return this.state.loading?Object(m.jsx)(x,{}):this.renderPage()}}]),n}(a.Component),P=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={user:{},loading:!0},e.renderUser=e.renderUser.bind(Object(O.a)(e)),e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.renderUser()}},{key:"renderUser",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:t=e.sent,this.setState({user:t,loading:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.user.name;return t?Object(m.jsx)(x,{}):Object(m.jsxs)("header",{"data-testid":"header-component",children:[Object(m.jsx)(j.b,{to:"/search","data-testid":"link-to-search",className:"headerLinks",children:"Search"}),Object(m.jsx)(j.b,{to:"/favorites","data-testid":"link-to-favorites",className:"headerLinks",children:"Favorites"}),Object(m.jsx)(j.b,{to:"/profile","data-testid":"link-to-profile",className:"headerLinks",children:"Profile"}),Object(m.jsx)(j.b,{to:"/profile",className:"profileButton",children:n})]})}}]),n}(a.Component),I=function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a,r,i,s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURI(t).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),e.next=4,fetch(a);case 4:return r=e.sent,e.next=7,r.json();case 7:return i=e.sent,s=i.results,c=s.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={inputSearch:"",currentSearch:"",searchResult:void 0,pesquisou:!1,loading:!1},e.handleChange=e.handleChange.bind(Object(O.a)(e)),e.searchAlbum=e.searchAlbum.bind(Object(O.a)(e)),e.renderAlbum=e.renderAlbum.bind(Object(O.a)(e)),e}return Object(u.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.id,a=t.value;this.setState(Object(v.a)({},n,a))}},{key:"searchAlbum",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.inputSearch,n=t,this.setState({inputSearch:"",currentSearch:n,loading:!0}),e.next=5,I(n);case 5:a=e.sent,this.setState({searchResult:a,loading:!1,pesquisou:!0});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderAlbum",value:function(){var e=this.state,t=e.searchResult,n=e.currentSearch,a="Estes s\xe3o os albuns de ".concat(n,":");return t.length>0?Object(m.jsxs)("div",{className:"containerSearchResults",children:[Object(m.jsx)("p",{children:a}),Object(m.jsx)("div",{className:"searchResults",children:t.map((function(e){return Object(m.jsxs)("div",{className:"searchResult",children:[Object(m.jsx)("img",{src:e.artworkUrl100}),Object(m.jsxs)("div",{className:"linkAndName",children:[Object(m.jsx)(j.b,{to:"/album/".concat(e.collectionId),"data-testid":"link-to-album-".concat(e.collectionId),className:"link",children:e.collectionName},e.collectionId),Object(m.jsx)("p",{children:e.artistName}),Object(m.jsx)("button",{children:Object(m.jsx)(j.b,{to:"/album/".concat(e.collectionId),"data-testid":"link-to-album-".concat(e.collectionId),className:"linkOuvir",children:"Ouvir"},e.collectionId)})]})]})}))})]}):"Nenhum \xe1lbum foi encontrado"}},{key:"render",value:function(){var e=this,t=this.state,n=t.inputSearch,a=t.loading,r=t.pesquisou;return Object(m.jsxs)("div",{"data-testid":"page-search",children:[Object(m.jsx)(P,{}),a?Object(m.jsx)(x,{}):Object(m.jsx)("div",{className:"inputSearch",children:Object(m.jsxs)("form",{autoComplete:"off",children:[Object(m.jsx)("input",{type:"text","data-testid":"search-artist-input",onChange:this.handleChange,value:n,id:"inputSearch",onKeyPress:function(t){"Enter"===t.key&&e.searchAlbum()},placeholder:"Digite o nome do album ou artista"}),n.length>=2?Object(m.jsx)("button",{"data-testid":"search-artist-button",onClick:this.searchAlbum,type:"button",children:"Pesquisar"}):Object(m.jsx)("button",{"data-testid":"search-artist-button",disabled:!0,type:"button",children:"Pesquisar"})]})}),r?this.renderAlbum():null]})}}]),n}(a.Component),A=n(25),M="favorite_songs";JSON.parse(localStorage.getItem(M))||localStorage.setItem(M,JSON.stringify([]));var D=function(){return JSON.parse(localStorage.getItem(M))},R=function(e){return localStorage.setItem(M,JSON.stringify(e))},U=function(e){return function(t){setTimeout((function(){t(e)}),500)}},E=function(){return new Promise((function(e){var t=D();U(t)(e)}))},L=function(e){return new Promise((function(t){if(e){var n=D();R([].concat(Object(A.a)(n),[e]))}U("OK")(t)}))},J=function(e){return new Promise((function(t){var n=D();R(n.filter((function(t){return t.trackId!==e.trackId}))),U("OK")(t)}))},q=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={loading:!1,favorites:[]},e.handleCange=e.handleCange.bind(Object(O.a)(e)),e.setFavorites=e.setFavorites.bind(Object(O.a)(e)),e.renderPage=e.renderPage.bind(Object(O.a)(e)),e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.setFavorites()}},{key:"handleCange",value:function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a,r,i,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.checked,a=this.props,r=a.music,i=a.updateFavorites,this.setState({loading:!0}),!n){e.next=8;break}return e.next=6,L(r);case 6:e.next=10;break;case 8:J(r),void 0!==i&&i();case 10:return e.next=12,E();case 12:s=e.sent,this.setState({loading:!1,favorites:s});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setFavorites",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:t=e.sent,this.setState({favorites:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderPage",value:function(){var e=this.props.music,t=e.trackName,n=e.previewUrl,a=e.trackId,r=this.state,i=r.favorites,s=r.loading;return void 0!==n?Object(m.jsxs)("div",{className:"music",children:[Object(m.jsx)("p",{children:t}),Object(m.jsxs)("audio",{"data-testid":"audio-component",src:n,controls:!0,children:[Object(m.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento"," ",Object(m.jsx)("code",{children:"audio"})]}),Object(m.jsxs)("label",{htmlFor:a,children:["Favorita",Object(m.jsx)("input",{type:"checkbox","data-testid":"checkbox-music-".concat(a),onChange:this.handleCange,checked:i.some((function(e){return e.trackId===a})),id:a})]}),s?Object(m.jsx)(x,{byFavorites:"true"}):null]}):null}},{key:"render",value:function(){var e=this.props.music,t=(e.trackName,e.previewUrl,e.trackId,this.state);t.favorites,t.loading;return this.renderPage()}}]),n}(a.Component);q.defaultProps={updateFavorites:void 0};var K=function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={musics:void 0,loading:!1,favoriteSongs:[]},e.isFavorite=e.isFavorite.bind(Object(O.a)(e)),e.renderMusics=e.renderMusics.bind(Object(O.a)(e)),e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setStates();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setStates",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,a,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match,n=t.params,a=n.id,e.next=5,K(a);case 5:return r=e.sent,this.setState({musics:r}),this.setState({loading:!0}),e.next=10,E();case 10:i=e.sent,this.setState({favoriteSongs:i,loading:!1});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isFavorite",value:function(e){var t=this.state.favoriteSongs;return!!t&&t.some((function(t){return t.trackId===e}))}},{key:"renderMusics",value:function(){for(var e=this.state,t=e.musics,n=e.favoriteSongs,a=[],r=1;r<t.length;r++)a.push(Object(m.jsx)("div",{children:Object(m.jsx)(q,{music:t[r],favorites:n},t[r].trackId)}));return a}},{key:"render",value:function(){var e=this.state,t=e.musics,n=e.loading;return Object(m.jsxs)("div",{"data-testid":"page-album",children:[Object(m.jsx)(P,{}),void 0!==t?Object(m.jsxs)("div",{className:"album",children:[Object(m.jsxs)("div",{className:"albumInfo",children:[Object(m.jsx)("img",{src:"".concat(t[0].artworkUrl100).replace("100x100bb.jpg","500x500bb.jpg")}),Object(m.jsx)("p",{"data-testid":"album-name",className:"albumName",children:t[0].collectionName}),Object(m.jsx)("p",{"data-testid":"artist-name",className:"artistName",children:t[0].artistName})]}),Object(m.jsx)("div",{className:"containerMusics",children:Object(m.jsx)("div",{className:"musics",children:this.renderMusics()})}),n?Object(m.jsx)(x,{}):null]}):null]})}}]),n}(a.Component),T=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={favoriteSongs:[],loading:void 0},e.loadFavoriteSongs=e.loadFavoriteSongs.bind(Object(O.a)(e)),e.updateFavorites=e.updateFavorites.bind(Object(O.a)(e)),e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.loadFavoriteSongs()}},{key:"loadFavoriteSongs",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,E();case 3:t=e.sent,this.setState({favoriteSongs:t,loading:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateFavorites",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:t=e.sent,this.setState({favoriteSongs:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.favoriteSongs,a=t.loading;return Object(m.jsxs)("div",{"data-testid":"page-favorites",children:[Object(m.jsx)(P,{}),a?Object(m.jsx)(x,{}):Object(m.jsxs)("div",{className:"favoritas",children:[Object(m.jsx)("p",{children:"Favoritas"}),n.map((function(t){return Object(m.jsx)(q,{music:t,updateFavorites:e.updateFavorites},t.trackId)}))]})]})}}]),n}(a.Component),B=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={profile:[],loading:!1},e.loadProfile=e.loadProfile.bind(Object(O.a)(e)),e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.loadProfile()}},{key:"loadProfile",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,S();case 3:t=e.sent,this.setState({profile:t}),this.setState({loading:!1});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.profile;return Object(m.jsxs)("div",{"data-testid":"page-profile",children:[Object(m.jsx)(P,{}),t?Object(m.jsx)(x,{}):Object(m.jsxs)("div",{className:"profilePage",children:[n.image?Object(m.jsx)("img",{src:n.image,"data-testid":"profile-image",alt:"profile"}):Object(m.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/1024px-Circle-icons-profile.svg.png","data-testid":"profile-image",alt:"profile"}),Object(m.jsx)("p",{className:"profileName",children:n.name}),Object(m.jsx)("p",{className:"profileEmail",children:n.email}),Object(m.jsx)("p",{className:"profileDescription",children:n.description}),Object(m.jsx)(j.b,{to:"/profile/edit",className:"Link",children:"Editar perfil"})]})]})}}]),n}(a.Component),_=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={loading:!1,profile:[],redirect:!1},e.loadProfile=e.loadProfile.bind(Object(O.a)(e)),e.buttonValidation=e.buttonValidation.bind(Object(O.a)(e)),e.handleChange=e.handleChange.bind(Object(O.a)(e)),e.updateAndRedirect=e.updateAndRedirect.bind(Object(O.a)(e)),e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.loadProfile()}},{key:"handleChange",value:function(e){var t=this.state.profile,n=e.target,a=n.value,r=n.id;this.setState({profile:Object(c.a)(Object(c.a)({},t),{},Object(v.a)({},r,a))})}},{key:"buttonValidation",value:function(){var e=this.state.profile,t=!1,n=Object.values(e)[1];return t=Object.values(e).every((function(e){return e.length>0})),void 0!==n&&(t=!(!n.includes("@")||!n.includes(".com"))),t}},{key:"loadProfile",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,S();case 3:t=e.sent,this.setState({profile:t,loading:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateAndRedirect",value:function(){var e,t=this.state.profile;e=t,new Promise((function(t){k(Object(c.a)({},e)),y("OK")(t)})),this.setState({redirect:!0})}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.profile,a=e.redirect;return Object(m.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(m.jsx)(P,{}),t?Object(m.jsx)(x,{}):Object(m.jsx)("div",{className:"profileEdit",children:Object(m.jsxs)("form",{autoComplete:"off",children:[Object(m.jsxs)("label",{children:[Object(m.jsx)("p",{children:"Nome:"}),Object(m.jsx)("input",{type:"text","data-testid":"edit-input-name",onChange:this.handleChange,value:n.name,id:"name"})]}),Object(m.jsxs)("label",{children:[Object(m.jsx)("p",{children:"Email:"}),Object(m.jsx)("input",{type:"email","data-testid":"edit-input-email",onChange:this.handleChange,value:n.email,id:"email"})]}),Object(m.jsxs)("label",{children:[Object(m.jsx)("p",{children:"Descri\xe7\xe3o:"}),Object(m.jsx)("textarea",{type:"text","data-testid":"edit-input-description",onChange:this.handleChange,value:n.description,id:"description"})]}),Object(m.jsxs)("label",{children:[Object(m.jsx)("p",{children:"Imagem:"}),Object(m.jsx)("input",{type:"text","data-testid":"edit-input-image",onChange:this.handleChange,value:n.image,id:"image",placeholder:"Link da Imagem"})]}),this.buttonValidation()?Object(m.jsx)("button",{type:"button","data-testid":"edit-button-save",onClick:this.updateAndRedirect,children:"Salvar"}):Object(m.jsx)("button",{type:"button","data-testid":"edit-button-save",disabled:!0,children:"Salvar"})]})}),a?Object(m.jsx)(b.a,{to:"/profile"}):null]})}}]),n}(a.Component),z=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(m.jsx)("div",{"data-testid":"page-not-found",children:"Pagina n\xe3o encontrada!"})}}]),n}(a.Component),G=(n(41),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(m.jsx)(j.a,{children:Object(m.jsxs)(b.d,{children:[Object(m.jsx)(b.b,{exact:!0,path:"https://leonardohenriquedev.github.io/trybetunes/",render:function(){return Object(m.jsx)(w,{})}}),Object(m.jsx)(b.b,{path:"https://leonardohenriquedev.github.io/trybetunes/search",render:function(){return Object(m.jsx)(F,{})}}),Object(m.jsx)(b.b,{path:"/album/:id",render:function(e){return Object(m.jsx)(V,Object(c.a)({},e))}}),Object(m.jsx)(b.b,{path:"/favorites",render:function(){return Object(m.jsx)(T,{})}}),Object(m.jsx)(b.b,{path:"/profile/edit",render:function(){return Object(m.jsx)(_,{})}}),Object(m.jsx)(b.b,{path:"/profile",render:function(){return Object(m.jsx)(B,{})}}),Object(m.jsx)(b.b,{path:"*",render:function(){return Object(m.jsx)(z,{})}})]})})}}]),n}(r.a.Component));s.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(G,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.e2d317ac.chunk.js.map